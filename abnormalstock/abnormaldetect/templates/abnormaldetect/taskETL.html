{% extends "abnormaldetect/layout.html" %}
{% block title %}
    CELERY LOG 
{% endblock %}
{% load crispy_forms_tags %}
{% block content %}
    {% if user.is_authenticated %}
        <h1>CELERY LOG</h1>
        <form action = "" method = "POST">
            <!--{% csrf_token %} -->
            <div class="form-row">
                <div class="form-group col-md-8 mb-0">
                    {{ form.ID_MODELLING|as_crispy_field }}
                </div>                              
            </div>
            <input type="submit" name="para_submit" value="Submit">
            <br>
        </form>
        {% if message_list %}
            <table class="table table-striped table-bordered" id="sortTable" cellspacing="0" width="100%">
                <thead style="position: sticky;top: 0" class="thead-dark">
                <tr>
                <th class="header" scope="col">AUTOID</th>
                <th class="header" scope="col">ID_MODELLING</th>                      
                <th class="header" scope="col">REFVERSION</th>
                <th class="header" scope="col">VERSION</th>
                <th class="header" scope="col">STATUS</th>
                <th class="header" scope="col">LOGCONTENT</th>
            </tr>
                </thead>
                <tbody>
                {% for message in message_list %}
                    <tr>
                    <td>{{ message.0 }}</td>
                    <td>{{ message.1 }}</td>
                    <td>{{ message.2 }}</td>
                    <td>{{ message.3 }}</td>
                    <td>{{ message.4 }}</td>
                    <td>{{ message.5 }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <script>
                $('#sortTable').DataTable();
            </script> 
        {% endif %}    
    {% endif %}  
{% endblock %}